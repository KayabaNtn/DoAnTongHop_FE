<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Cats Sport Academy</title>
    <link href="./assets/css/FE_54_QL.css" rel="stylesheet">
    <link href="./assets/css/responsive.css" rel="stylesheet">
    <link href="./assets/fonts/themify-icons.css" rel="stylesheet">
</head>
<body>


<div id="main">

    <div id="header">
        <!-- Begin : nav -->
        <ul id="nav"> <!--ul#nav>li*5 -->
            <img alt="abc" class="logo" src="./assets/image/logo.jpg">
            <li><a href="../Hocvien/FE_ALL.html">Trang chủ</a></li>
            <li><a href="./FE_24_QL.html">Học Viên </a></li>
            <li><a href="./FE_QLNV_QL.html">Nhân Viên </a></li>
            <li><a href="./FE_36_QL.html">Hợp Đồng </a></li>
            <li><a href="./FE_42_QL.html">Phiếu Đăng Kí </a></li>
            <li><a href="./FE_54_QL.html">Feed-Back </a></li>
            <li><a href="./FE_18_QL.html">Khóa Học </a></li>
            <li><a href="./FE_48_QL.html">Vật tư </a></li>
            <li><a href="#footer">Giới thiệu</a></li>
        </ul>
        <!-- End : nav -->
        <!-- Begin : search button -->
        <div class="search-btn">
            <i class="search-icon ti-search"></i>
        </div>
        <div class="search-btn1">
            <p class="fix">Mai Hồng Quân <br>
                Quản lí </p>
        </div>
        <!-- End : search button -->
    </div>

    <div id="bodys">
        <div class="form-student">
            <h3>Thông tin về các Phản hồi </h3>

            <label>ID Nhân Viên :</label>
            <input id="IDNV" tabindex="1" type="text">
            <br>

            <label>ID Học Viên :</label>
            <input id="IDHV" tabindex="1" type="text">
            <br>

            <label>Date :</label>
            <input id="ngayGui" tabindex="1" type="text">
            <br>


            <div class="btn-save1">
                <button class="btn-save Search" onclick="SEARCH()">Tìm</button>
            </div>
        </div>

        <div class="list-student">
            <h3>Danh sách </h3>

            <table id="table-container">
                <thead>
                <tr>
                    <th>STT</th>
                    <th>Tên huấn luyện viên</th>
                    <th>Tên học viên</th>
                    <th>Feedback</th>
                    <th>Ngày gửi</th>
                </tr>
                </thead>
                <tbody>
                <!-- Các hàng dữ liệu sẽ được thêm vào đây -->
                </tbody>
            </table>
        </div>
    </div>


    <div id="footer">
        <div class="socials-list">
            <a href=""><i class="ti-facebook"></i></a>
            <a href=""><i class="ti-instagram"></i></a>
            <a href=""><i class="ti-youtube"></i></a>
            <a href=""><i class="ti-printerest"></i></a>
            <a href=""><i class="ti-twitter"></i></a>
            <a href=""><i class="ti-linkedin"></i></a>
        </div>
        <p class="copyright">
            Powered by <a href="#"> Cats Sport Academy
        </a>
        </p>
    </div>
</div>


<script>

    const Search = document.querySelector(" .Search");


    // Example POST method implementation:
    async function Searchs(url = "") {
        // Default options are marked with *
        const response = await fetch(url, {
            method: "GET", // *GET, POST, PUT, DELETE, etc.
            mode: "cors", // no-cors, *cors, same-origin
            cache: "no-cache", // *default, no-cache, reload, force-cache, only-if-cached
            credentials: "same-origin", // include, *same-origin, omit
            headers: {
                "Content-Type": "application/json",
                // 'Content-Type': 'application/x-www-form-urlencoded',
            },
            redirect: "follow", // manual, *follow, error
            referrerPolicy: "no-referrer", // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url
            //body: JSON.stringify(data), // body data type must match "Content-Type" header
        });
        return response.json(); // parses JSON response into native JavaScript objects
    }


    function SEARCH() {
        // Lấy tham chiếu đến phần tử input
        var inputIDNV = document.getElementById("IDNV").value;
        var inputIDHV = document.getElementById("IDHV").value;
        var inputngayGui = document.getElementById("ngayGui").value;


        let data = {
            idHv: inputIDHV,
            idHlv: inputIDNV,
            pageBegin: 0,
            pageEnd: 5,
            feedBack: null,
            ngayGui: inputngayGui
        }
        let queryString = Object.keys(data).map(key => key + '=' + encodeURIComponent(data[key])).join('&');
        let urlWithQuery = 'http://localhost:8889/Feedback/search??' + queryString;

        Search.addEventListener('click', Searchs(urlWithQuery).then((data) => {
            const table = document.getElementById("table-container");
            const tbody = table.getElementsByTagName("tbody")[0];

            // Xóa các hàng hiện tại
            while (tbody.firstChild) {
                tbody.removeChild(tbody.firstChild);
            }

            // Thêm dữ liệu từ API vào bảng
            data.forEach(function (item) {
                const row = document.createElement("tr");
                const cell1 = document.createElement("td");
                const cell2 = document.createElement("td");
                const cell3 = document.createElement("td");
                const cell4 = document.createElement("td");
                const cell5 = document.createElement("td");

                cell1.textContent = item.stt;
                cell2.textContent = item.tenNv;
                cell3.textContent = item.tenHv;
                cell4.textContent = item.feedBack;
                cell5.textContent = item.ngayGui;


                row.appendChild(cell1);
                row.appendChild(cell2);
                row.appendChild(cell3);
                row.appendChild(cell4);
                row.appendChild(cell5);

                tbody.appendChild(row);


            });
        }));
    }


</script>

</body>
</html>
